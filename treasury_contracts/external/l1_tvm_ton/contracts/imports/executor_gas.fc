#include "stdlib.fc";
#include "utils.fc";
#include "./precompiled_gas_const/ccl_gas_utils.fc";
#include "./precompiled_gas_const/executor_gas_utils.fc";

() check_amount_is_enough_to_proxy(int balance, int fwd_fee, cell payload) impure inline {
    throw_unless(ERROR::NOT_ENOUGH_GAS,
        ;; Executor -> CCL -> Executor -> CCL -> 1. Event, 2. Response(optional)
        balance > 4 * fwd_fee + 
        get_compute_fee(BASECHAIN, EXECUTOR_ERROR_EXECUTION_CHAIN_GAS_CONSUMPTION) +
        calculate_ccl_min_storage_fee() +
        calculate_executor_min_storage_fee(payload)
    );
}