#include "stdlib.fc";

cell calculate_nft_item_state_init(int item_index, slice collection_address, slice ccl_address, cell nft_item_code) inline {
  cell data = begin_cell()
    .store_bool(FALSE) ;; init?:bool
    .store_uint(item_index, 256)
    .store_ref(
    begin_cell()
      .store_slice(collection_address)
      .store_slice(ccl_address)
      .store_slice(address_none())
      .end_cell()
  )
    .store_bool(FALSE) ;; content:(Maybe ^Cell)
    .end_cell();

  return begin_cell()
    .store_uint(0, 2)
    .store_dict(nft_item_code)
    .store_dict(data)
    .store_uint(0, 1)
    .end_cell();
}

const NFT_INDEX_SIZE = 256;

(slice, int) ~load_nft_index(slice s) inline {
  return s.load_uint(NFT_INDEX_SIZE);
}

builder store_nft_index(builder b, int s) inline {
  return b.store_uint(s, NFT_INDEX_SIZE);
}
